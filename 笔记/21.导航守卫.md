## 1.命名视图
同一个组件内部有两个不同的 <router-view /> 添加name属性，当路由匹配后，不同的地方显示不同的组件
app.vue
```html
<template>
  <div id="app">
    <div id="cover" />
    <Header />
    <!-- <Todo /> -->
    <router-link to="/app/123">APP</router-link>
    <router-link to='/login'>login</router-link>
    <router-link to='/login/exact'>login Exact</router-link>
    <transition name='fade'>
      <router-view />
    </transition>
    <Footer />
    <router-view name='a'/>
  </div>
</template>

```

routes.js

```javascript
import Todo from '../views/todo/todo.vue'
import Login from '../views/login/login.vue'

export default [
  {
    path: '/',
    redirect: '/app' // 默认路由跳转
  },
  {
    path: '/app',
    props: true,
    // props: (route) => ({ id: route.query.b }),
    // component: Todo,
    components: {
      default: Todo,   // 当匹配路由/app无名字的router-view 显示组件todo
      a: Login         // a 显示login
    },
    name: 'appName',
    meta: {
      title: 'this is app',
      description: 'ceshiceshi1'
    }
  },
  {
    path: '/login',
    component: Login
  },
  {
    path: '/login/exact',
    components: {
      default: Login,
      a: Todo
    }
  }
]

```

三栏布局， 根据不同路由切换不同菜单

## 2.导航守卫 - 全局验证

entry.js 注册守卫， 在每次路由跳转触发钩子

```javascript
import Vue from 'vue'
import VueRouter from 'vue-router'
import APP from './app.vue'
import './assets/styles/test.css'
import './assets/styles/global.styl'
import createRouter from './config/router'
// 使用插件不需要创建Dom
// const root = document.createElement('div')
// document.body.appendChild(root)

// 如果使用模块化机制编程，导入Vue和VueRouter，要调用 Vue.use(VueRouter)
Vue.use(VueRouter) // vue插件的使用方式
const router = createRouter()

router.beforeEach((to, from, next) => {
  console.log('before each invoked')
  next() // 执行next才会跳转
})

router.beforeResolve((to, from, next) => {
  console.log('before Resolve invoked')
  next() // 执行next才会跳转
})

router.afterEach((to, from) => {
  console.log('before afterEach invoked')
})
// 记得要通过 router 配置参数注入路由，
// 从而让整个应用都有路由功能
new Vue({
  router, // 挂载 router对象
  render: (h) => h(APP)
}).$mount('#root')
```

### 作用进行登陆页面验证
可以添加跳转配置
```javascript
router.beforeEach((to, from, next) => {
  console.log('before each invoked')
  if (to.fullPath === '/app') {
    next('login') // 跳转login
   // next({ path: '/login' })
  } else {
    next()// 执行next才会跳转
  }
})

```
## 3. 单个组件钩子 - 在路由配置时添加
routes.js

```javascript
import Todo from '../views/todo/todo.vue'
import Login from '../views/login/login.vue'

export default [
  {
    path: '/',
    redirect: '/app' // 默认路由跳转
  },
  {
    path: '/app',
    props: true,
    // props: (route) => ({ id: route.query.b }),
    component: Todo,
    name: 'appName',
    meta: {
      title: 'this is app',
      description: 'ceshiceshi1'
    },
    beforeEnter (to, from, next) {
      console.log('app route before enter')
      next() // 只有执行next 才会进入
    }
  },
  {
    path: '/login',
    component: Login
  }
]

```


## 4.组件内部添加钩子
beforeRouteUpdate 同一个组件在不同路由下时候会触发
path: '/app/:id'

1. 每次路由更新都可以触发
2. 注意拿到组件之前/next调用之前拿不到this
```javascript
    <router-link to="/app/123">
      APP123
    </router-link>
    <router-link to="/app/456">
      APP456
    </router-link>
  {
    path: '/app/:id',
    props: true,
    component: Todo,
    name: 'appName',
    meta: {
      title: 'this is app',
      description: 'ceshiceshi1'
    },
    beforeEnter (to, from, next) {
      console.log('【routes】app route before enter')
      next() // 只有执行next 才会进入
    }
  },
//  注意拿到组件之前拿不到this
export default {
  beforeRouteEnter (to, from, next) {
    console.log('【todo】 before enter')
    next()
  },
  beforeRouteUpdate (to, from, next) {
    console.log('【todo】 before Update')
    next()
  },
  beforeRouteLeave (to, from, next) {
    console.log('【todo】 before leave')
    next()
  },
```
## 5.组件内部数据操作组件数据
mounted 相同路由下不触发，数据不更新， 可以使用beforeRouteUpdate,   

做数据获取。
```javascript
export default {
  beforeRouteEnter (to, from, next) {
    console.log('【todo】 before enter')
    // vm可以访问组件this
    next(vm => {
      console.log('after enter this.id', vm.id)
    })
  },
  beforeRouteUpdate (to, from, next) {
    console.log('【todo】 before Update')
    next()
  },
  beforeRouteLeave (to, from, next) {
    console.log('【todo】 before leave')
    next()
  },
  components: {
    Item,
    Tabs
  },
  props: ['id'],
  mounted() {
    相同路由下不触发
  }
}
```
## 6.异步组件
一次性把所有文件打包会导致文件过大，对于不同的路由，只加载核心代码，和对应路由代码

```javascript
export default [
  {
    path: '/',
    redirect: '/app' // 默认路由跳转
  },
  {
    path: '/app/:id',
    props: true,
    // props: (route) => ({ id: route.query.b }),
    component: () => import('../views/todo/todo.vue'),

    name: 'appName',
    meta: {
      title: 'this is app',
      description: 'ceshiceshi1'
    },
    beforeEnter (to, from, next) {
      console.log('【routes】app route before enter')
      next() // 只有执行next 才会进入
    }
  },
  {
    path: '/login',
    component: () => import('../views/login/login.vue')
  }
]


```

安装babel插件
npm install --save-dev @babel/plugin-syntax-dynamic-import
.babrlrc

```javascript
{
    "presets": ["@babel/preset-env"],
    "plugins": [
        //转化vue jsx
        "transform-vue-jsx",
        "@babel/plugin-syntax-dynamic-import"
    ]
}
```
