# Vuexq其他API和一些配置

## 1.解绑模块
```javascript
// z
store.registerModule('C', {
  state: {
    text: 3
  }
})
store.unregisterModule('C')
```

## 2. store.watch

第一个方法监听想要返回的值，接收一个 state，返回一个新的值，相当于getter方法。
第二个方法，当第一个方法返回值有变化时候调用
```javascript
store.watch((state) => state.count + 1, (newCount) => {
  console.log("new count watched:", newCount)
} )

```


## 3. Vuex 插件时使用：vue.subscribe
订阅会拿到所有mutation变化，拿到回调

```javascript
store.subscribe((mutation, state) => {
  console.log(mutation.type)
  console.log(mutation.payload) // mutationj接收到的参数
})

>>> updateCount
>>> entry.js?5cc9:53 {num: 9, num2: 2}
```

##  4.Vuex 插件时使用：store.subscribeAction
  
```javascript
store.subscribeAction((action, state) => {
  console.log('action.type', action.type)
  console.log('action.payload', action.payload) // action接收到的参数
})
```

## 5.vuex插件
就是一个function，在生成store时候传入一个function， 是一个数组，创建store时候执行，可以订阅一些参数
```javascript
const store = new Vuex.Store({
  // strict: true, // 禁止直接修改state
  strict: isDev,
  state: defaultState,
  mutations: mutations,
  getters,
  actions,
  plugins: [
    (store) => {
      console.log('my plugin invoked')
    }
  ],
```

## 6. vuex 的结构
![computed 方法和 methods 方法执行区别](https://github.com/FanWorldBegin/vue-ssr/blob/master/images/26.1.jpeg)

在顶部声明root , 渲染APP节点
```javascript
new Vue({
  router, // 挂载 router对象
  store,
  render: (h) => h(APP)
}).$mount('#root')

```
